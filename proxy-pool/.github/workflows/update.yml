name: Proxy Pool Update

on:
schedule:
- cron: '0 */6 * * *'# 每6小时运行一次
workflow_dispatch:# 支持手动触发

jobs:
build:
runs-on: ubuntu-latest
steps:
- name: Checkout
uses: actions/checkout@v4

- name: Set up Python
uses: actions/setup-python@v5
with:
python-version: '3.10'

- name: Install dependencies
run: |
python -m pip install --upgrade pip
pip install requests PyYAML

- name: Fetch proxies
run: python scripts/fetch.py

- name: Validate proxies
run: python scripts/validate.py

- name: Push updates
run: |
git config --global user.name 'GitHub Actions'
git config --global user.email 'actions@github.com'
git add data/valid_ips.txt
git commit -m "Update valid proxies"
git push
